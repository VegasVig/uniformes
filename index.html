<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>Solicitação de Uniforme - Vegas</title>

<style>

body{
  background:#000;
  font-family:Arial, Helvetica, sans-serif;
  color:#ddd;
  text-align:center;
  margin:0;
}

.container{
  max-width:420px;
  margin:20px auto;
  background:#111;
  padding:20px;
  border-radius:12px;
  box-shadow:0 0 10px rgba(255,255,255,0.08);
}

.logo{
  width:170px;
  margin-bottom:10px;
  filter:grayscale(100%);
}

input,select{
  width:95%;
  padding:12px;
  margin:10px 0;
  background:#0c0c0c;
  border:1px solid #444;
  color:white;
  border-radius:8px;
}

/* ===== LISTA UNIFORMES ===== */

.uniformes{
  text-align:left;
  margin-top:15px;
}

.uniformes label{
  display:flex;
  align-items:center;
  gap:10px;
  background:#0c0c0c;
  padding:10px;
  border-radius:6px;
  margin:6px 0;
  border:1px solid #333;
}

.uniformes input[type="checkbox"]{
  width:18px;
  height:18px;
  cursor:pointer;
}

/* ===== ASSINATURA ===== */

canvas{
  background:white;
  border-radius:8px;
  border:2px solid #444;
  margin-top:10px;
  touch-action:none;
}

/* ===== BOTÃO ===== */

button{
  margin-top:15px;
  padding:14px;
  width:95%;
  border:none;
  background:linear-gradient(#bbb,#666);
  font-weight:bold;
  border-radius:8px;
  cursor:pointer;
}

button:hover{
  background:linear-gradient(#fff,#888);
}

</style>
</head>

<body>

<div class="container">

<img src="./assets/vegaslogo.jpg" class="logo">

<h3>Solicitação de Uniforme</h3>

<input id="nome" placeholder="Nome do funcionário">

<select id="posto" onchange="carregarUniformes()">
<option value="">Selecione o Posto</option>
<option value="armado">Vigilante Armado - Geral</option>
<option value="nagumo">Vigilante Nagumo</option>
<option value="royal">Vigilante Royal</option>
<option value="porteiroHSJB">Porteiro HSJB</option>
<option value="porteiroGeral">Porteiro Geral</option>
<option value="projetoVida">Projeto Vida</option>
<option value="asg">ASG</option>
<option value="monitoramento">Monitoramento</option>
<option value="tecnica">Área Técnica</option>
<option value="administrativo">Administrativo</option>
<option value="comercial">Comercial</option>
</select>

<div id="listaUniformes" class="uniformes"></div>

<h4>Assinatura</h4>
<canvas id="assinatura"></canvas>

<button onclick="enviar()">SOLICITAR UNIFORME</button>

</div>

<script>

/* =========================
   BANCO DE UNIFORMES
========================= */

const uniformes = {

armado:[
"Camisa vigilante bege",
"Calça tática",
"Blusa preta vigilância",
"Casaco vigilância",
"Gravata",
"Capa placa balística",
"Boné",
"Fiel",
"Apito",
"Coturno"
],

nagumo:[
"Blazer",
"Calça social",
"Camisa social branca",
"Gravata",
"Sapato social"
],

royal:[
"Blazer",
"Calça social",
"Camisa social branca",
"Gravata",
"Coldre axilar"
],

porteiroHSJB:[
"Blazer",
"Calça social",
"Camisa social branca",
"Gravata",
"Sapato social"
],

porteiroGeral:[
"Camisa porteiro cinza",
"Calça social",
"Blusa preta serviços",
"Casaco preto",
"Boné"
],

projetoVida:[
"Blusa preta serviços",
"Calça social",
"Casaco preto",
"Botina"
],

asg:[
"Camisa ASG cinza",
"Calça elástico",
"Blusa preta serviços",
"Casaco preto",
"Botina"
],

monitoramento:[
"Blusa preta vigilância",
"Casaco preto vigilância"
],

tecnica:[
"Blusa preta vigilância",
"Calça jeans",
"Casaco preto",
"Boné"
],

administrativo:[
"Blusa preta social",
"Casaco preto"
],

comercial:[
"Blusa social",
"Casaco preto"
]

};

/* =========================
   CARREGAR UNIFORMES
========================= */

function carregarUniformes(){

const posto = document.getElementById("posto").value;
const div = document.getElementById("listaUniformes");

div.innerHTML="";

if(!uniformes[posto]) return;

uniformes[posto].forEach(item=>{
div.innerHTML += `
<label>
<input type="checkbox" value="${item}">
<span>${item}</span>
</label>`;
});

}

/* =========================
   ASSINATURA MOBILE FIX
========================= */

const canvas = document.getElementById("assinatura");
const ctx = canvas.getContext("2d");

function ajustarCanvas(){
  canvas.width = canvas.offsetWidth;
  canvas.height = 160;
}

ajustarCanvas();
window.addEventListener("resize",ajustarCanvas);

let desenhando=false;

canvas.addEventListener("touchstart",(e)=>{
 e.preventDefault();
 desenhando=true;
},{passive:false});

canvas.addEventListener("touchend",(e)=>{
 e.preventDefault();
 desenhando=false;
 ctx.beginPath();
},{passive:false});

canvas.addEventListener("touchmove",(e)=>{
 e.preventDefault();

 if(!desenhando) return;

 const rect = canvas.getBoundingClientRect();
 const touch = e.touches[0];

 ctx.lineWidth=2;
 ctx.lineCap="round";
 ctx.strokeStyle="black";

 ctx.lineTo(
   touch.clientX-rect.left,
   touch.clientY-rect.top
 );

 ctx.stroke();
 ctx.beginPath();
 ctx.moveTo(
   touch.clientX-rect.left,
   touch.clientY-rect.top
 );

},{passive:false});

/* =========================
   ENVIO
========================= */

async function enviar(){

const checks=document.querySelectorAll("input[type=checkbox]:checked");

if(checks.length===0){
 alert("Selecione ao menos um uniforme.");
 return;
}

let itens=[];
checks.forEach(c=>itens.push(c.value));

const assinatura = canvas.toDataURL();

await fetch("COLE_AQUI_URL_APPS_SCRIPT",{
method:"POST",
body:JSON.stringify({
nome:document.getElementById("nome").value,
posto:document.getElementById("posto").value,
itens:itens.join(", "),
assinatura:assinatura
})
});

alert("Solicitação enviada com sucesso!");
location.reload();
}

</script>

</body>
</html>
