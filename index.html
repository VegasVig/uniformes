<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>Solicitação de Uniforme - Vegas</title>

<style>

/* ===== BASE ===== */

body{
  margin:0;
  font-family:'Segoe UI', Arial, sans-serif;
  background:radial-gradient(circle at top,#1a1a1a 0%,#000 60%);
  color:#e5e5e5;
}

/* ===== CONTAINER ===== */

.container{
  max-width:420px;
  margin:30px auto;
  padding:25px;
  border-radius:18px;
  background:rgba(20,20,20,0.9);
  backdrop-filter:blur(8px);
  box-shadow:
    0 10px 30px rgba(0,0,0,0.8),
    inset 0 0 0 1px rgba(255,255,255,0.05);
}

/* ===== LOGO ===== */

.logo{
  width:180px;
  display:block;
  margin:auto;
  margin-bottom:15px;
  filter:grayscale(100%) brightness(1.2);
}

/* ===== TITULOS ===== */

h3{
  text-align:center;
  letter-spacing:1px;
  font-weight:600;
}

h4{
  margin-top:20px;
  color:#bbb;
  font-weight:500;
}

/* ===== INPUTS ===== */

input,select,textarea{
  width:100%;
  padding:14px;
  margin-top:10px;
  background:#0b0b0b;
  border:1px solid #2f2f2f;
  border-radius:10px;
  color:#fff;
  font-size:15px;
  transition:0.25s;
}

input:focus,select:focus,textarea:focus{
  outline:none;
  border:1px solid #777;
  box-shadow:0 0 8px rgba(255,255,255,0.15);
}

textarea{
  height:85px;
  resize:none;
}

/* ===== UNIFORMES ===== */

.item{
  background:linear-gradient(145deg,#0a0a0a,#141414);
  border-radius:12px;
  padding:12px;
  margin:8px 0;
  border:1px solid #262626;
  transition:.2s;
}

.item:hover{
  transform:scale(1.01);
  border-color:#444;
}

.item label{
  display:flex;
  align-items:center;
  gap:12px;
  cursor:pointer;
}

/* CHECKBOX MODERNO */

.item input[type="checkbox"]{
  appearance:none;
  width:20px;
  height:20px;
  border-radius:6px;
  border:2px solid #555;
  background:#000;
  cursor:pointer;
}

.item input[type="checkbox"]:checked{
  background:#d0d0d0;
  border-color:#d0d0d0;
  box-shadow:0 0 6px rgba(255,255,255,0.5);
}

.tamanho{
  margin-top:10px;
}

/* ===== ASSINATURA ===== */

canvas{
  width:100%;
  height:160px;
  background:white;
  border-radius:12px;
  border:2px solid #333;
  touch-action:none;
}

/* ===== BOTÃO ===== */

button{
  margin-top:20px;
  width:100%;
  padding:16px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:600;
  letter-spacing:1px;
  background:linear-gradient(135deg,#e0e0e0,#7a7a7a);
  color:#000;
  cursor:pointer;
  transition:.25s;
  box-shadow:
    0 5px 15px rgba(0,0,0,0.7),
    inset 0 1px 0 rgba(255,255,255,0.5);
}

button:hover{
  transform:translateY(-2px);
}

button:active{
  transform:scale(.98);
}

</style>
</head>

<body>

<div class="container">

<img src="assets/vegaslogo.jpg" class="logo">

<h3>Solicitação de Uniforme</h3>

<input id="nome" placeholder="Nome do funcionário">

<select id="posto" onchange="carregarUniformes()">
<option value="">Selecione o Posto</option>
<option value="armado">Vigilante Armado</option>
<option value="porteiro">Porteiro</option>
<option value="asg">ASG</option>
<option value="tecnica">Área Técnica</option>
</select>

<div id="listaUniformes"></div>

<h4>Observações</h4>
<textarea id="observacao"
placeholder="Digite alguma observação (opcional)..."></textarea>

<h4>Assinatura</h4>
<canvas id="assinatura"></canvas>

<button onclick="enviar()">SOLICITAR UNIFORME</button>

</div>

<script>

/* ===== IDENTIFICA CALÇADO ===== */

function ehCalcado(nome){
 const n = nome.toLowerCase();
 return n.includes("sapato") ||
        n.includes("coturno") ||
        n.includes("botina");
}

/* ===== UNIFORMES ===== */

const uniformes={
armado:["Camisa vigilante","Calça tática","Coturno","Boné"],
porteiro:["Camisa social","Calça social","Sapato social"],
asg:["Camisa ASG","Calça elástico","Botina"],
tecnica:["Blusa técnica","Calça jeans","Botina"]
};

/* ===== CARREGAR ===== */

function carregarUniformes(){

const posto=document.getElementById("posto").value;
const div=document.getElementById("listaUniformes");
div.innerHTML="";

if(!uniformes[posto]) return;

uniformes[posto].forEach(item=>{

let tamanhoHTML="";

/* ROUPAS */
if(!ehCalcado(item)){
tamanhoHTML=`
<select class="tamanho" disabled>
<option value="">Tamanho</option>
<option>P</option>
<option>M</option>
<option>G</option>
<option>GG</option>
<option>EG</option>
</select>`;
}

/* CALÇADOS */
else{
tamanhoHTML=`<select class="tamanho" disabled>
<option value="">Número</option>
${Array.from({length:15},(_,i)=>`<option>${i+34}</option>`).join("")}
</select>`;
}

div.innerHTML+=`
<div class="item">
<label>
<input type="checkbox" onchange="ativarTamanho(this)">
<span>${item}</span>
</label>
${tamanhoHTML}
</div>`;
});

}

/* ===== ATIVAR TAMANHO ===== */

function ativarTamanho(check){
const select=check.closest(".item").querySelector(".tamanho");
if(select) select.disabled=!check.checked;
}

/* ===== ASSINATURA MOBILE ===== */

const canvas=document.getElementById("assinatura");
const ctx=canvas.getContext("2d");

function ajustarCanvas(){
 canvas.width=canvas.offsetWidth;
 canvas.height=160;
}
ajustarCanvas();
window.addEventListener("resize",ajustarCanvas);

let desenhando=false;

canvas.addEventListener("touchstart",(e)=>{
 e.preventDefault();
 desenhando=true;
},{passive:false});

canvas.addEventListener("touchend",(e)=>{
 e.preventDefault();
 desenhando=false;
 ctx.beginPath();
},{passive:false});

canvas.addEventListener("touchmove",(e)=>{
 e.preventDefault();
 if(!desenhando) return;

 const rect=canvas.getBoundingClientRect();
 const t=e.touches[0];

 ctx.lineWidth=2;
 ctx.lineCap="round";

 ctx.lineTo(t.clientX-rect.left,t.clientY-rect.top);
 ctx.stroke();
 ctx.beginPath();
 ctx.moveTo(t.clientX-rect.left,t.clientY-rect.top);

},{passive:false});

/* ===== ENVIO ===== */

async function enviar(){

const itens=[];

document.querySelectorAll(".item").forEach(item=>{
 const check=item.querySelector("input");
 const tamanho=item.querySelector(".tamanho");

 if(check.checked){
   itens.push(
     check.nextElementSibling.textContent +
     (tamanho ? " - "+tamanho.value : "")
   );
 }
});

if(itens.length===0){
 alert("Selecione ao menos um uniforme.");
 return;
}

const assinatura=canvas.toDataURL();

await fetch("COLE_AQUI_URL_APPS_SCRIPT",{
method:"POST",
body:JSON.stringify({
nome:document.getElementById("nome").value,
posto:document.getElementById("posto").value,
itens:itens.join(" | "),
observacao:document.getElementById("observacao").value,
assinatura:assinatura
})
});

alert("Solicitação enviada com sucesso!");
location.reload();
}

</script>

</body>
</html>

