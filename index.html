<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>Entrega de Uniformes - Vegas</title>

<style>

body{
  background:#0b0b0b;
  font-family:Arial;
  color:white;
  text-align:center;
}

.container{
  max-width:600px;
  margin:auto;
}

input,select,textarea{
  width:95%;
  padding:10px;
  margin:6px;
  border-radius:6px;
  border:none;
}

button{
  padding:12px;
  margin:10px;
  border:none;
  border-radius:6px;
  background:#caa64b;
  color:black;
  font-weight:bold;
  cursor:pointer;
}

canvas{
  background:white;
  border-radius:6px;
}

.logo{
  width:200px;
  margin-top:20px;
}

</style>
</head>

<body>

<div class="container">

<img src="uniatual.jpg" class="logo">

<h2>Entrega de Uniformes</h2>

<input id="nome" placeholder="Nome completo">

<input id="cpf" placeholder="CPF">

<input id="telefone" placeholder="Telefone">

<select id="posto">
<option>Selecione o posto</option>
<option>ASG</option>
<option>Comercial</option>
<option>Área Técnica</option>
</select>

<textarea id="uniformes" placeholder="Uniformes solicitados"></textarea>

<textarea id="observacao" placeholder="Observações"></textarea>

<h3>Assinatura do Funcionário</h3>

<canvas id="assinatura" width="400" height="200"></canvas>

<br>

<button onclick="limparAssinatura()">Limpar Assinatura</button>
<button onclick="enviar()">Enviar</button>

</div>

<script>

/* ===========================
   CONFIG
=========================== */

const URL_SCRIPT = "COLE_AQUI_SUA_URL_EXEC";

/* ===========================
   ASSINATURA DIGITAL
=========================== */

const canvas = document.getElementById("assinatura");
const ctx = canvas.getContext("2d");

let desenhando = false;

canvas.addEventListener("mousedown", iniciar);
canvas.addEventListener("mouseup", parar);
canvas.addEventListener("mousemove", desenhar);

canvas.addEventListener("touchstart", iniciarTouch);
canvas.addEventListener("touchend", parar);
canvas.addEventListener("touchmove", desenharTouch);

function iniciar(){
  desenhando = true;
}

function parar(){
  desenhando = false;
  ctx.beginPath();
}

function desenhar(e){
  if(!desenhando) return;

  const rect = canvas.getBoundingClientRect();

  ctx.lineWidth = 2;
  ctx.lineCap = "round";

  ctx.lineTo(
    e.clientX - rect.left,
    e.clientY - rect.top
  );

  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(
    e.clientX - rect.left,
    e.clientY - rect.top
  );
}

/* MOBILE */

function iniciarTouch(e){
  desenhando = true;
}

function desenharTouch(e){
  if(!desenhando) return;

  e.preventDefault();

  const rect = canvas.getBoundingClientRect();
  const touch = e.touches[0];

  ctx.lineWidth = 2;
  ctx.lineCap = "round";

  ctx.lineTo(
    touch.clientX - rect.left,
    touch.clientY - rect.top
  );

  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(
    touch.clientX - rect.left,
    touch.clientY - rect.top
  );
}

/* ===========================
   LIMPAR ASSINATURA
=========================== */

function limparAssinatura(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

/* ===========================
   ENVIAR DADOS
=========================== */

function enviar(){

  const assinaturaBase64 = canvas.toDataURL("image/png");

  const dados = {
    data: new Date(),
    nome: document.getElementById("nome").value,
    cpf: document.getElementById("cpf").value,
    telefone: document.getElementById("telefone").value,
    posto: document.getElementById("posto").value,
    uniformes: document.getElementById("uniformes").value,
    observacao: document.getElementById("observacao").value,
    assinatura: assinaturaBase64
  };

  fetch(URL_SCRIPT,{
    method:"POST",
    body: JSON.stringify(dados)
  })
  .then(()=>{

    alert("Entrega registrada com sucesso ✅");

    document.getElementById("nome").value="";
    document.getElementById("cpf").value="";
    document.getElementById("telefone").value="";
    document.getElementById("uniformes").value="";
    document.getElementById("observacao").value="";

    limparAssinatura();
  })
  .catch(()=>alert("Erro ao enviar"));

}

</script>

</body>
</html>