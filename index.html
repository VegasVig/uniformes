<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>Solicitação de Uniforme</title>

<style>

body{
  background:#000;
  font-family:Arial;
  color:#ddd;
  text-align:center;
}

.container{
  max-width:420px;
  margin:auto;
  background:#111;
  padding:20px;
  border-radius:12px;
}

.logo{
  width:170px;
  filter:grayscale(100%);
}

input,select{
  width:95%;
  padding:12px;
  margin:10px 0;
  background:#0c0c0c;
  border:1px solid #444;
  color:white;
  border-radius:8px;
}

.uniformes{
  text-align:left;
  margin-top:15px;
}

label{
  display:block;
  margin:5px 0;
}

canvas{
  background:white;
  border-radius:8px;
  margin-top:10px;
}

button{
  margin-top:15px;
  padding:14px;
  width:95%;
  border:none;
  background:linear-gradient(#bbb,#666);
  font-weight:bold;
  border-radius:8px;
}

</style>
</head>

<body>

<div class="container">

<img src="assets/vegaslogo.png" class="logo">

<h3>Solicitação de Uniforme</h3>

<input id="nome" placeholder="Nome do funcionário">

<!-- POSTOS -->
<select id="posto" onchange="carregarUniformes()">
<option value="">Selecione o Posto</option>
<option value="armado">Vigilante Armado - Geral</option>
<option value="nagumo">Vigilante Nagumo</option>
<option value="royal">Vigilante Royal</option>
<option value="porteiroHSJB">Porteiro HSJB</option>
<option value="porteiroGeral">Porteiro Geral</option>
<option value="projetoVida">Projeto Vida</option>
<option value="asg">ASG</option>
<option value="monitoramento">Monitoramento</option>
<option value="tecnica">Área Técnica</option>
<option value="administrativo">Administrativo</option>
<option value="comercial">Comercial</option>
</select>

<!-- UNIFORMES DINÂMICOS -->
<div id="listaUniformes" class="uniformes"></div>

<h4>Assinatura</h4>
<canvas id="assinatura" width="300" height="150"></canvas>

<button onclick="enviar()">SOLICITAR</button>

</div>

<script>

/* ===== BANCO DE UNIFORMES ===== */

const uniformes = {

armado:[
"Camisa vigilante bege",
"Calça tática",
"Blusa preta vigilância",
"Casaco vigilância",
"Gravata",
"Capa placa balística",
"Boné",
"Fiel",
"Apito",
"Coturno"
],

nagumo:[
"Blazer",
"Calça social",
"Camisa social branca",
"Gravata",
"Sapato social"
],

royal:[
"Blazer",
"Calça social",
"Camisa social branca",
"Gravata",
"Coldre axilar"
],

porteiroHSJB:[
"Blazer",
"Calça social",
"Camisa social branca",
"Gravata",
"Sapato social"
],

porteiroGeral:[
"Camisa porteiro cinza",
"Calça social",
"Blusa preta serviços",
"Casaco preto",
"Boné"
],

projetoVida:[
"Blusa preta serviços",
"Calça social",
"Casaco preto",
"Botina"
],

asg:[
"Camisa ASG cinza",
"Calça elástico",
"Blusa preta serviços",
"Casaco preto",
"Botina"
],

monitoramento:[
"Blusa preta vigilância",
"Casaco preto vigilância"
],

tecnica:[
"Blusa preta vigilância",
"Calça jeans",
"Casaco preto",
"Boné"
],

administrativo:[
"Blusa preta social",
"Casaco preto"
],

comercial:[
"Blusa social",
"Casaco preto"
]

};

/* ===== CARREGA UNIFORMES ===== */

function carregarUniformes(){

const posto = document.getElementById("posto").value;
const div = document.getElementById("listaUniformes");

div.innerHTML="";

if(!uniformes[posto]) return;

uniformes[posto].forEach(item=>{
div.innerHTML += `
<label>
<input type="checkbox" value="${item}">
 ${item}
</label>`;
});

}

/* ===== ASSINATURA ===== */

const canvas = document.getElementById("assinatura");
const ctx = canvas.getContext("2d");
let desenhando=false;

canvas.addEventListener("touchstart",()=>desenhando=true);
canvas.addEventListener("touchend",()=>{
desenhando=false;
ctx.beginPath();
});

canvas.addEventListener("touchmove",(e)=>{
if(!desenhando) return;

let rect = canvas.getBoundingClientRect();

ctx.lineWidth=2;
ctx.lineCap="round";

ctx.lineTo(
e.touches[0].clientX-rect.left,
e.touches[0].clientY-rect.top
);

ctx.stroke();
ctx.beginPath();
ctx.moveTo(
e.touches[0].clientX-rect.left,
e.touches[0].clientY-rect.top
);
});

/* ===== ENVIO ===== */

async function enviar(){

const checks = document.querySelectorAll("input[type=checkbox]:checked");

let itens=[];
checks.forEach(c=>itens.push(c.value));

const assinatura = canvas.toDataURL();

await fetch("COLE_AQUI_URL_APPS_SCRIPT",{
method:"POST",
body:JSON.stringify({
nome:document.getElementById("nome").value,
posto:document.getElementById("posto").value,
itens:itens.join(", "),
assinatura:assinatura
})
});

alert("Solicitação enviada!");
location.reload();
}

</script>

</body>
</html>

